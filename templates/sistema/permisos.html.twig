{% extends 'base.html.twig' %}

{% block title %}Intranet - Editar sistema{% endblock %}
{% block stylesheets %}
    {{ parent() }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
{% endblock %}
{% block icon %}
    {{ parent() }}
{% endblock %}
{% block body %}
    {{ parent() }}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

    <div>
        <h3 class="cuadroTitulos" >Permisos a los sistemas</h3>
    </div>
    {% set contador=1 %}
    {% for sistema in sistemas %}
        {%  set palabraDiv = "div" ~ contador %}
        <div class="container permisoSistemas" onclick="$('#{{palabraDiv}}').slideToggle(300);" >
            <h5 style="color:white;margin-left: 10px;">{{ sistema.nombre }} - {{sistema.usuarios|length}} usuarios</h5>
        </div>
        {% set contador= contador +1  %}
        <div style="display:none;" id="{{palabraDiv}}" class="container">
            {%  set palabraDiv = "div" ~ contador %}
            {% for usuario in usuarios %}
                {# {% if usuario in sistema.usuarios %}   #}
                    <div class="row" style="margin:20px;border-bottom: solid 1.5px grey;">
                        <div class="col-8">
                            <h5 style="color:#2B2B2B;margin-top:10px;">{{ usuario.email }}</h5>
                        </div>
                        {% if usuario in sistema.usuarios %}   
                            <div class="col-4" style="text-align:center;margin-bottom: 10px;">
                                <a class="btn btn-danger" href="{{path('quitarPermiso', {'idSistema': sistema.id, 'idUsuario': usuario.id})}}">Quitar</a>
                            </div>
                        {% else %}
                            <div class="col-4" style="text-align:center;margin-bottom: 10px;">
                                <a class="btn" style="background-color:#0F9FA8;color:white;" href="{{path('agregarPermiso', {'idSistema': sistema.id, 'idUsuario': usuario.id})}}">Agregar</a>
                            </div>
                        {% endif %}
                    </div>
                {# {% endif %}   #}
            {% endfor %}    
        </div>
    {% endfor %}    
    
    {% block notificaciones %}
        {{ parent() }}
    {% endblock notificaciones %}

{% endblock %}
